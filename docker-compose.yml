name: hackyeah-demo

services:
  gateway:
    image: nginx:1.27.1-alpine
    ports:
    - "8080:80"
    environment:
    - NGINX_PORT=80
    volumes:
    - type: bind
      source: ./gateway.conf
      target: /etc/nginx/nginx.conf
      read_only: true
    networks:
    - backend-mesh
    depends_on:
    - transaction-service-api
    - classifier-api
    - frontend

  # transaction-service-api:
  #   environment:
  #   - LOGGING__LOGLEVEL__DEFAULT=Trace
  #   - COLLABOTHON__LOGSENSITIVE=false
  #   - COLLABOTHON__DATABASEFILE=/data/demo.db
  #   - COLLABOTHON__CLASSIFIER=http://classifier-api:8000/
  #   - ASPNETCORE_URLS=http://0.0.0.0:80/
  #   image: collabothon-transaction-service-api:latest
  #   build:
  #     context: ./backend/
  #     dockerfile: ./transaction-service-api/Dockerfile
  #   user: root
  #   volumes:
  #   - transaction-service-data:/data
  #   networks:
  #   - backend-mesh
  #   depends_on:
  #   - classifier-api

  # classifier-api:
  #   image: collabothon-classifier-api:latest
  #   build:
  #     context: "."
  #     dockerfile: Dockerfile
  #   networks:
  #   - backend-mesh
  #   ports:
  #   - 8000:8000

  # frontend:
  #   image: collabothon-frontend:latest
  #   build:
  #     context: ./frontBlog
  #     dockerfile: Dockerfile
  #   networks:
  #   - backend-mesh
  #   depends_on:
  #   - transaction-service-api
  #   - classifier-api

volumes:
  transaction-service-data:

networks:
  backend-mesh:
